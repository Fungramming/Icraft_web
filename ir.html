<!DOCTYPE html>
<html lang="ko" xml:lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>ICRAFT</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <meta name="description" content="Awesome Description Here" />
  <meta name="keywords" content="ICRAFT 아이크래프트(주)" />
  <meta name="robots" content="noindex,nofollow" />
  <meta property="og:title" content="아이크래프트(주)" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="ko_KR" />
  <meta property="og:locale:alternate" content="en_US" />
  <meta property="og:url" content="http://www.icraft21.com/" />
  <meta property="og:image" content="http://www.icraft21.com/image.jpg" />
  <meta property="og:description" content="아이크래프트(주)" />
  <link rel="shortcut icon" href="img/favicon.ico">  
  <!-- <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css' rel='stylesheet' type='text/css'> -->
  <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="css/ir.css" />
</head>

<body>
  <div class="container-fluid">
    <header id="header"></header>
    <section>
      <div class="img-wrapper">
        <div class="img-text-group">
          <p class="img-text-title">I.R</p>
          <p class="img-text-des">유비쿼터스 네트워크 세상을 열어가는 전문 IT기업 아이크래프트</p>
        </div>
      </div>
      <ul class="small-menu">
        <li class="small-menu-list">
          <a href="#" class="active-menu">주가정보</a>
        </li>
        <li class="small-menu-list">
          <a href="financial-info.html" class="">재무정보</a>
        </li>
        <li class="small-menu-list">
          <a href="account-info.html" class="">경영공시</a>
        </li>
        <li class="small-menu-list">
          <a href="regulation-info.html" class="">내부 정보 관리 규정</a>                
        </li>
      </ul>
    </section>
    <article>
      <p class="location">
        <a href="index.html">홈</a>
        <span> < </span>
        <a href="#">IR</a>
        <span> < </span>
        <a href="#">주가정보</a>
      </p>
      <div class="article">
          <div class="article-wrapper">
            <h2 class="article-title">주가정보</h2>
            <div class="table-wrap">
              <table class="table">
                <caption>아이크래프트 주가 차트입니다.</caption>
                <tbody class="stock-header">
                  <p class="emp">아이크래프트</p>
                  <tr class="stock-header-tr1">
                    <td width="15%" rowspan="2" class="subject subject-icraft subject-icraft-main" scope="row"></td>
                    <!-- <td width="15%" class="subject subject-icraft lastday" scope="row">전일</td>
                    <td width="15%" class="subject subject-icraft top_price" scope="row">고가</td>
                    <td width="15%" class="subject subject-icraft volume" scope="row">거래량</td>  -->
                  </tr>
                  <tr class="stock-header-tr2">
                    <!-- <td width="20%" class="subject subject-sub start_price" scope="row">시가</td>
                    <td width="20%" class="subject subject-sub low_price" scope="row">저가</td>
                    <td width="20%" class="subject subject-sub" scope="row">79,856</td> -->
                  </tr>
                </tbody>
              </table>
            </div>
            <div id="curve_chart" style="width: 100%; height: 450px"></div>
            <div class="table-wrap">
              <table class="table">
                <caption>아이크래프트 주가 시간별시세 차트입니다.</caption>
                <tbody class="stock-time">
                  <p class="article-text">시간별시세</p>                  
                  <tr class="tr-header">
                    <td width="15%" class="subject" scope="row">체결시각</td>
                    <td width="15%" class="subject" scope="row">체결가</td>
                    <td width="15%" class="subject" scope="row">전일비</td>
                    <td width="15%" class="subject" scope="row">매도</td>
                    <td width="15%" class="subject" scope="row">매수</td>
                    <td width="15%" class="subject" scope="row">변동량</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="table-wrap">
              <table class="table">
                <caption>아이크래프트 주가 일별시세 차트입니다.</caption>
                <tbody>
                  <p class="article-text">일별시세</p>                  
                  <tr class="tr-header">
                    <td width="15%" class="subject" scope="row">날짜</td>
                    <td width="15%" class="subject" scope="row">종가</td>
                    <td width="15%" class="subject" scope="row">전일비</td>
                    <td width="15%" class="subject" scope="row">시가</td>
                    <td width="15%" class="subject" scope="row">고가</td>
                    <td width="15%" class="subject" scope="row">저가</td>
                    <td width="15%" class="subject" scope="row">변동량</td>
                  </tr>
                  <tr>
                    <td width="15%" scope="row">매출액</td>
                    <td width="15%" scope="row">92,532</td>
                    <td width="15%" scope="row">79,856</td>
                    <td width="15%" scope="row">68,367</td>
                    <td width="15%" scope="row">68,367</td>
                    <td width="15%" scope="row">68,367</td>
                    <td width="15%" scope="row">68,367</td>
                  </tr>
                  <tr>
                    <td width="15%" scope="row">영업이익</td>
                    <td width="15%" scope="row">2,120</td>
                    <td width="15%" scope="row">4,515</td>
                    <td width="15%" scope="row">3,509</td>
                    <td width="15%" scope="row">3,509</td>
                    <td width="15%" scope="row">3,509</td>
                    <td width="15%" scope="row">3,509</td>
                  </tr>
                  <tr>
                    <td width="15%" scope="row">당기순이익</td>
                    <td width="15%" scope="row">2,193</td>
                    <td width="15%" scope="row">2,175</td>
                    <td width="15%" scope="row">2,742</td>
                    <td width="15%" scope="row">2,742</td>
                    <td width="15%" scope="row">2,742</td>
                    <td width="15%" scope="row">2,742</td>
                  </tr>
                  <tr>
                    <td width="15%" scope="row">부채총계</td>
                    <td width="15%" scope="row">26,972</td>
                    <td width="15%" scope="row">18,799</td>
                    <td width="15%" scope="row">19,198</td>
                    <td width="15%" scope="row">19,198</td>
                    <td width="15%" scope="row">19,198</td>
                    <td width="15%" scope="row">19,198</td>
                  </tr>
                  <tr>
                    <td width="15%" scope="row">자본총계</td>
                    <td width="15%" scope="row">34,839</td>
                    <td width="15%" scope="row">36,043</td>
                    <td width="15%" scope="row">34,666</td>
                    <td width="15%" scope="row">34,666</td>
                    <td width="15%" scope="row">34,666</td>
                    <td width="15%" scope="row">34,666</td>
                  </tr>
                </tbody>
              </table>
              <nav aria-label="Page navigation example">
                <ul class="pagination">
                  <li class="page-item page-arrow"><a class="page-link" href="#"><img src="img/icon-left-arrow.png" alt=""></a></li>
                  <li class="page-item"><a class="page-link page-num" href="#">1</a></li>
                  <li class="page-item"><a class="page-link page-num" href="#">2</a></li>
                  <li class="page-item"><a class="page-link page-num" href="#">3</a></li>
                  <li class="page-item page-arrow"><a class="page-link" href="#"><img src="img/icon-right-arrow.png" alt=""></a></li>
                </ul>
              </nav>
            </div>
          </div>
      </div>
    </article>
    <footer id="footer"></footer>
    <button class="move-top">&uarr;</button>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script src="bootstrap/js/bootstrap.min.js"></script>
  <script src="./js/common.js"></script>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript" src="js/jquery.number.min.js"></script>
  <script type="text/javascript">
    // google.charts.load('current', {'packages':['corechart']});
    // google.charts.setOnLoadCallback(drawChart);

    // function drawChart() {
    //   var data = google.visualization.arrayToDataTable([
    //     ['Year', 'Sales', 'Expenses'],
    //     ['2004',  1000,      400],
    //     ['2005',  1170,      460],
    //     ['2006',  660,       1120],
    //     ['2007',  1030,      540]
    //   ]);

    //   var options = {
    //     title: 'Company Performance',
    //     curveType: 'function',
    //     legend: { position: 'bottom' },
    //     chartArea: { width: '100%' },
    //     width: '100%',
    //     lineWith: '100%',
    //   };

    //   var chart = new google.visualization.LineChart(document.getElementById('chart'));

    //   chart.draw(data, options);
    // }
    
    getJson()
    
    function getJson() {
      $.ajax({
        url: "https://nllyo9o76k.execute-api.ap-northeast-2.amazonaws.com/prod/stock/realtime",
        async: true,
        type: "GET",
        dataType: "json",
        crossDomain: true,
        success: function(data) {
          var stockMain = data.data
          var stock = data.data.each_stock
          console.log('stockMain :', stockMain);

          var tbodySt = $(".stock-time")
          var trHeader = $(".tr-header")

          var lastDay = stockMain.lastday
          var low_price = stockMain.low_price
          var now_price = stockMain.now_price
          var start_price = stockMain.start_price
          var top_price = stockMain.top_price
          var volume = stockMain.volume
          var diff = stockMain.diff

          $('.subject-icraft-main').append("<span class='now_price number'>" + now_price + "</span>" +
            "<br>" + "전일대비 " + "<span class='arrow-u'>" + "</span>" + "<span class='diff'>" + diff + "</span>" 
          )
          $('.stock-header-tr1').append("<td width='15%' class='subject subject-icraft' scope='row'>" + "전일 " + "<span class='lastDay number'>" + lastDay + "</span>" + "</td>" +
          "<td width='15%' class='subject subject-icraft' scope='top'>" + "고가 " + "<span class='top_price number'>" + top_price + "</span>" + "</td>" +
          "<td width='15%' rowspan='2' class='subject subject-icraft volume' scope='row'>" + "거래량 " + "<span class='volume-text number'>" + volume + "</td>"
          )
          $('.stock-header-tr2').append("<td width='15%' class='subject subject-icraft' scope='row'>" + "시가 " + "<span class='start_price number'>" + start_price + "</span>" + "</td>" +
          "<td width='15%' class='subject subject-icraft' scope='row'>" + "저가 " + "<span class='low_price number'>" + low_price + "</span>" + "</td>"
          )

          if ( $(".lastday") > $(".now_price") ) {
            $(".now_price").css('color', 'blue')
          }
          
          $('.number').number(true)

          var makeTr = document.createElement("tr")
          var makeTd = document.createElement("td")
          var makeSpan = document.createElement("span")

          for (let i = 0; i < stock.length; i++) {
            var el = stock[i];
            var dateTime = el.datetime.substr(el.datetime.length - 8)
            var dateTimeS = dateTime.substr(0,5)
            var nego = el.nego
            var diff = el.diff
            var sell = el.sell
            var buy = el.buy
            var amountDiff = el.amount_diff

            var newTr = tbodySt.append("<tr class='tr-hover'>" + "<td>" + dateTimeS + "</td>" + 
              "<td>"+ "<span class='number'>" + nego + "</span>" + "</td>" + 
              "<td>"+ "<span class='diff-t'>" + "</span>" + diff + "</td>" +
              "<td>"+ "<span class='number'>" + sell + "</span>" + "</td>" +
              "<td>"+ "<span class='number'>" + buy + "</span>" + "</td>" + 
              "<td>"+ "<span class='number'>" + amountDiff + "</span>" + "</td>" + "</tr>"
              )
              
            $('.number').number(true)  

            if ( diff.toString().indexOf('-') !== -1 ) {
              $('.diff-t').attr('class', 'arrow-d')
            } else {
              $('.diff-t').attr('class', 'arrow-u')
            }

          }
        }, 
        error: function() {
          alert("failed");
        }
      }).responseText;

      $.ajax({
        url: "https://nllyo9o76k.execute-api.ap-northeast-2.amazonaws.com/prod/stock/2weeks/1",
        async: true,
        type: "GET",
        dataType: "json",
        crossDomain: true,
        success: function(data) {
          console.log('2weeks :', data);
        }, 
        error: function() {
          alert("failed");
        }
      }).responseText;
    }


    // $(window).resize(function() {
    //   drawChart()
    // })
    

  </script>
</body>

</html>